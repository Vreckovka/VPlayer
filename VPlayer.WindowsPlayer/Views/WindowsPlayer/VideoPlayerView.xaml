<UserControl x:Class="VPlayer.WindowsPlayer.Views.WindowsPlayer.VideoPlayerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:behaviors="clr-namespace:VPlayer.Player.Behaviors"
             xmlns:behaviors1="clr-namespace:VPlayer.WindowsPlayer.Behaviors"
             xmlns:controls="clr-namespace:VCore.Controls;assembly=VCore.WPF"
             xmlns:controls1="clr-namespace:VPlayer.WindowsPlayer.Vlc.Controls"
             xmlns:converters="clr-namespace:VCore.Converters;assembly=VCore.WPF"
             xmlns:converters1="clr-namespace:VPlayer.WindowsPlayer.Converters"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:interactivity="http://prismlibrary.com/"
             xmlns:local="clr-namespace:VPlayer.WindowsPlayer.Views.WindowsPlayer"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vlc="clr-namespace:VPlayer.WindowsPlayer.Vlc"
             d:DesignHeight="450"
             d:DesignWidth="800"
             mc:Ignorable="d">


    <ContentControl Margin="1,0,0,0">
        <Grid>
            <vlc:VideoView x:Name="VideoView" MediaPlayer="{Binding MediaPlayer}">
                <Grid HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      Background="#01000000">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <Menu x:Name="VideoMenu"
                          Padding="0,0"
                          VerticalAlignment="Top"
                          Background="#101010">
                        <MenuItem Height="35"
                                  Header="Audio tracks"
                                  IsEnabled="{Binding AudioTracks.Count, Converter={converters1:EmptyItemSourceToDisable}}"
                                  ItemsSource="{Binding AudioTracks}">
                            <MenuItem.ItemContainerStyle>
                                <Style BasedOn="{StaticResource {x:Type MenuItem}}" TargetType="MenuItem">
                                    <Setter Property="IsChecked" Value="{Binding IsSelected}" />
                                    <Setter Property="IsCheckable" Value="True" />
                                </Style>
                            </MenuItem.ItemContainerStyle>
                            <MenuItem.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Description}" />
                                </DataTemplate>
                            </MenuItem.ItemTemplate>
                        </MenuItem>

                        <MenuItem Height="35"
                                  Header="Subtitles"
                                  IsEnabled="{Binding Subtitles.Count, Converter={converters1:EmptyItemSourceToDisable}}"
                                  ItemsSource="{Binding Subtitles}">
                            <MenuItem.ItemContainerStyle>
                                <Style BasedOn="{StaticResource {x:Type MenuItem}}" TargetType="MenuItem">
                                    <Setter Property="IsChecked" Value="{Binding IsSelected}" />
                                    <Setter Property="IsCheckable" Value="True" />
                                </Style>
                            </MenuItem.ItemContainerStyle>
                            <MenuItem.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Description}" />
                                </DataTemplate>
                            </MenuItem.ItemTemplate>

                        </MenuItem>

                        <MenuItem Height="35"
                                  Header="Aspect ratio"
                                  IsEnabled="{Binding AspectRatios.Count, Converter={converters1:EmptyItemSourceToDisable}}"
                                  ItemsSource="{Binding AspectRatios}">
                            <MenuItem.ItemContainerStyle>
                                <Style BasedOn="{StaticResource {x:Type MenuItem}}" TargetType="MenuItem">
                                    <Setter Property="IsChecked" Value="{Binding IsSelected}" />
                                    <Setter Property="IsCheckable" Value="True" />
                                </Style>
                            </MenuItem.ItemContainerStyle>
                            <MenuItem.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Description}" />
                                </DataTemplate>
                            </MenuItem.ItemTemplate>

                        </MenuItem>

                        <MenuItem Height="35"
                                  Header="Crop ratio"
                                  IsEnabled="{Binding CropRatios.Count, Converter={converters1:EmptyItemSourceToDisable}}"
                                  ItemsSource="{Binding CropRatios}">
                            <MenuItem.ItemContainerStyle>
                                <Style BasedOn="{StaticResource {x:Type MenuItem}}" TargetType="MenuItem">
                                    <Setter Property="IsChecked" Value="{Binding IsSelected}" />
                                    <Setter Property="IsCheckable" Value="True" />
                                </Style>
                            </MenuItem.ItemContainerStyle>
                            <MenuItem.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Description}" />
                                </DataTemplate>
                            </MenuItem.ItemTemplate>

                        </MenuItem>

                        <Separator Width="1.5"
                                   Height="30"
                                   Margin="2,0"
                                   Background="#252525" />

                        <MenuItem Height="35"
                                  Command="{Binding PlayFromStream}"
                                  Header="Play from stream" />
                    </Menu>

                    <Grid Grid.Row="1" Background="#cc101010">
                        <Border Padding="15,5"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Background="#cc080808"
                                BorderBrush="#50252525"
                                BorderThickness="1">
                            <TextBlock FontSize="18"
                                       Foreground="#ccc"
                                       Text="Buffering..." />
                        </Border>
                        <Grid.Style>
                            <Style TargetType="Grid">
                                <Setter Property="Visibility" Value="Collapsed" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsBuffering}" Value="True">
                                        <Setter Property="Visibility" Value="Visible" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Style>
                    </Grid>

                    <controls1:FullscreenPlayer x:Name="FullscreenPlayer"
                                                Grid.Row="1"
                                                Visibility="Hidden" />

                    <b:Interaction.Behaviors>
                        <behaviors1:FullScreenBehavior x:Name="FullScreenBehavior" PlayerDataContext="{Binding PlayerViewModel}" />
                    </b:Interaction.Behaviors>
                </Grid>



                <b:Interaction.Triggers>
                    <b:EventTrigger EventName="Loaded">
                        <b:InvokeCommandAction Command="{Binding VideoViewInitlized}" />
                    </b:EventTrigger>
                </b:Interaction.Triggers>
            </vlc:VideoView>


        </Grid>
    </ContentControl>
</UserControl>
