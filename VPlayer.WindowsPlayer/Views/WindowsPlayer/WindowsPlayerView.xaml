<UserControl x:Class="VPlayer.Player.Views.WindowsPlayer.WindowsPlayerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:behaviors="clr-namespace:VPlayer.Player.Behaviors"
             xmlns:converters="clr-namespace:VCore.Converters;assembly=VCore"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:local="clr-namespace:VPlayer.Player.Views"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:windowsPlayer="clr-namespace:VPlayer.WindowsPlayer"
             xmlns:design1="clr-namespace:VPlayer.Player.Design"
             d:DataContext="{d:DesignInstance Type={x:Type design1:PlayerDesingViewModel},
                                              IsDesignTimeCreatable=True}"
             d:DesignHeight="450"
             d:DesignWidth="800"
             Background="{StaticResource BackgroudBrush}"
             mc:Ignorable="d">
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/VPlayer.WindowsPlayer;component/Views/WindowsPlayer/WindowsPlayerViewResources.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <RowDefinition Height="auto" />
    </Grid.RowDefinitions>

    <Grid Margin="0,0,0,-9">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="5" />
        <ColumnDefinition Width="370" />
      </Grid.ColumnDefinitions>

      <Grid Grid.Column="0">
        <Grid.RowDefinitions>
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid VerticalAlignment="Stretch">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
          </Grid.ColumnDefinitions>

          <Image Grid.Column="0"
                 Source="{Binding ActualSong.Image}"
                 Stretch="UniformToFill" />

          <Image Grid.Column="1"
                 Source="{Binding ActualSong.Image}"
                 Stretch="UniformToFill" />

          <Grid Grid.RowSpan="2"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">
            <Grid.Background>
              <LinearGradientBrush StartPoint="0,1" EndPoint="0 0">
                <GradientStop Offset="1" Color="#5A000000" />
                <GradientStop Offset="0.6" Color="#5A000000" />
                <GradientStop Offset="0.05" Color="#5A000000" />
              </LinearGradientBrush>
            </Grid.Background>
          </Grid>
        </Grid>

        <Grid Grid.Row="0">
          <Grid.Background>
            <LinearGradientBrush StartPoint="1,0" EndPoint="0 0">
              <GradientStop Offset="1" Color="#AF000000" />
              <GradientStop Offset="0.7" Color="#00000000" />
              <GradientStop Offset="0.3" Color="#00000000" />
              <GradientStop Offset="0.0" Color="#AF000000" />
            </LinearGradientBrush>
          </Grid.Background>
        </Grid>

        <Image Name="Image"
               Source="{Binding ActualSong.Image}"
               Stretch="Uniform" />


        <Grid Grid.Row="0">
          <Grid.Background>
            <LinearGradientBrush StartPoint="0,1" EndPoint="0 0">
              <GradientStop Offset="1" Color="#2AF0F0F0" />
              <GradientStop Offset="0.85" Color="#00000000" />
              <GradientStop Offset="0.15" Color="#00000000" />
              <GradientStop Offset="0.0" Color="#2AF0F0F0" />
            </LinearGradientBrush>
          </Grid.Background>
        </Grid>

        <Grid Grid.Row="0"
              Width="{Binding ElementName=Image, Path=ActualWidth}"
              Height="{Binding ElementName=Image, Path=ActualHeight}">
          <Grid.Background>
            <LinearGradientBrush StartPoint="1,0" EndPoint="0 0">
              <GradientStop Offset="1" Color="#20000000" />
              <GradientStop Offset="0.75" Color="#00000000" />
              <GradientStop Offset="0.2" Color="#00000000" />
              <GradientStop Offset="0.0" Color="#20000000" />
            </LinearGradientBrush>
          </Grid.Background>
        </Grid>

        <Button VerticalAlignment="Bottom"
                HorizontalAlignment="Left"
                Margin="10 0 0 15"
                Command="{Binding AlbumDetail}"
                FontSize="36"
                Width="50">
          <Button.Style>
            <Style BasedOn="{StaticResource BorderlessButtonStyle}" TargetType="Button">
              <Setter Property="FontWeight" Value="Bold" />
              <Setter Property="Foreground" Value="#FF000000"/>
              <Setter Property="Content" >
                <Setter.Value>
                  <Grid>
                    <Grid Background="White" Width="15" Height="35" VerticalAlignment="Center"/>
                    <Path Style="{StaticResource Information}" 
                          Data="M49.52,38.12c3.06,0,5.52-2.52,5.52-5.58c0-3-2.46-5.52-5.52-5.52S44,29.54,44,32.54C44,35.6,46.46,38.12,49.52,38.12z  
                          M55.4,45.86c0-2.52-2.04-4.5-4.5-4.5h-4.5c-2.52,0-4.5,1.98-4.5,4.5c0,2.46,1.98,4.5,4.5,4.5V63.5c-2.52,0-4.5,2.04-4.5,4.5  
                          c0,2.52,1.98,4.5,4.5,4.5h9c2.46,0,4.5-1.98,4.5-4.5c0-2.46-2.04-4.5-4.5-4.5V45.86z M50,5c24.84,0,45,20.16,45,45S74.84,95,50,95  
                          C25.1,95,5,74.84,5,50S25.1,5,50,5z"
                          Fill="{Binding RelativeSource={RelativeSource AncestorType=Button,Mode=FindAncestor}, Path=Foreground}"
                          StrokeThickness="0.2"
                          Stroke="{Binding RelativeSource={RelativeSource AncestorType=Button,Mode=FindAncestor}, Path=Foreground}"/>
                  </Grid>
                </Setter.Value>
              </Setter>
              <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                  <Setter Property="Foreground" Value="{StaticResource DefaultRedBrush}"/>
                </Trigger>
              </Style.Triggers>
            </Style>
          </Button.Style>
        </Button>

      </Grid>

      <GridSplitter Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    IsEnabled="False">
        <GridSplitter.Style>
          <Style TargetType="GridSplitter">
            <Setter Property="Width" Value="3" />
            <Setter Property="Background" Value="{StaticResource 3_WhiteTransparentBrush}" />
          </Style>
        </GridSplitter.Style>
      </GridSplitter>
      <Grid Grid.Column="2">
        <Grid.RowDefinitions>
          <RowDefinition Height="auto" />
          <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ListView x:Name="ListView_Tracks"
                  Grid.Row="1"
                  Margin="0,0,0,5"
                  HorizontalAlignment="Stretch"
                  AllowDrop="True"
                  ItemTemplate="{StaticResource SoundTrackTemplate}"
                  ItemsSource="{Binding PlayList}"
                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                  Style="{StaticResource WindowsPlayerSongs}">
          <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseDoubleClick">
              <i:InvokeCommandAction Command="{Binding NextSong}" CommandParameter="{Binding ElementName=ListView_Tracks, Path=SelectedItem}" />
            </i:EventTrigger>
          </i:Interaction.Triggers>
        </ListView>
      </Grid>
    </Grid>

    <Grid Grid.Row="1">
      <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="auto" />
      </Grid.RowDefinitions>

      <Slider x:Name="Slider_Time"
              Margin="0"
              Padding="0"
              IsMoveToPointEnabled="True"
              Maximum="1"
              Value="{Binding ActualSong.ActualPosition}">
        <i:Interaction.Behaviors>
          <behaviors:SliderValueChangedManualy Kernel="{Binding Kernel}" Duration="{Binding ActualSong.Duration}" />
        </i:Interaction.Behaviors>
      </Slider>

      <Grid Grid.Row="1" Margin="5,0,5,5">
        <TextBlock HorizontalAlignment="Left"
                   FontSize="13"
                   Foreground="{StaticResource 120_WhiteTransparentBrush}"
                   Text="{Binding ActualSong.ActualTime, StringFormat=hh\\:mm\\:ss}" />
        <TextBlock HorizontalAlignment="Right"
                   FontSize="13"
                   Foreground="{StaticResource 120_WhiteTransparentBrush}"
                   Text="{Binding ActualSong.Duration, Converter={converters:TimeConverter TimeType=Second}}" />
      </Grid>
    </Grid>
  </Grid>
</UserControl>